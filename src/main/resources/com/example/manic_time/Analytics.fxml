<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.geometry.*?>
<?import javafx.scene.chart.*?>
<?import javafx.scene.control.*?>
<?import javafx.scene.layout.*?>

<AnchorPane xmlns="http://javafx.com/javafx/17.0.2-ea" xmlns:fx="http://javafx.com/fxml/1" fx:controller="com.example.manic_time.AnalyticsController">
    <children>
        <StackPane AnchorPane.bottomAnchor="0.0" AnchorPane.leftAnchor="0.0" AnchorPane.rightAnchor="0.0" AnchorPane.topAnchor="0.0">
            <BorderPane fx:id="mainPane" prefHeight="600.0" prefWidth="800.0" style="-fx-background-color: #f5f8fa;">
                <!-- Header Section -->
                <top>
                    <VBox>
                        <!-- Title Bar -->
                        <HBox alignment="CENTER" spacing="20" style="-fx-background-color: linear-gradient(to bottom right, #0A4957, #28966c); -fx-border-color: #28966c; -fx-padding: 10; -fx-border-width: 0 0 3 0;">
                            <Label style="-fx-font-size: 20px; -fx-font-weight: bold; -fx-text-fill: white;" text="ANALYTICS" />
                        </HBox>

                        <!-- Week Selection -->
                        <HBox alignment="CENTER" spacing="20" style="-fx-padding: 10; -fx-background-color: #f0f0f0;">
                            <Label style="-fx-font-size: 14px; -fx-text-fill: #333333;" text="Choisir la semaine :" />
                            <ChoiceBox fx:id="weekSelector" style="-fx-font-size: 14px;" />
                            <Button mnemonicParsing="false" onAction="#handleWeekSelection" style="-fx-background-color: #005A9E; -fx-font-size: 14px;" text="Mettre à jour" textFill="WHITE" />
                        </HBox>
                    </VBox>
                </top>

                <!-- Main Content -->
                <center>
                    <GridPane alignment="CENTER" hgap="20" style="-fx-background-color: #ffffff; -fx-border-radius: 10px; -fx-padding: 20;" vgap="20">
                        <!-- Button Group for Switching Graph Types -->
                        <HBox spacing="20" alignment="CENTER">
                            <Button fx:id="barChartButton" text="Graphique à barres" onAction="#handleBarChartButton" style="-fx-background-color: #28966c; -fx-text-fill: white; -fx-font-size: 14px;"/>
                            <Button fx:id="lineChartButton" text="Graphique en ligne" onAction="#handleLineChartButton" style="-fx-background-color: #28966c; -fx-text-fill: white; -fx-font-size: 14px;"/>
                            <Button fx:id="scatterChartButton" text="Graphique en points" onAction="#handleScatterChartButton" style="-fx-background-color: #28966c; -fx-text-fill: white; -fx-font-size: 14px;"/>
                        </HBox>

                        <!-- Bar Chart -->
                        <BarChart fx:id="usageChart" prefHeight="500.0" prefWidth="1000.0" style="-fx-background-color: #e0e0e0; -fx-border-radius: 10px;">
                            <xAxis>
                                <CategoryAxis fx:id="dayAxis" label="Jours de la semaine" />
                            </xAxis>
                            <yAxis>
                                <NumberAxis fx:id="timeAxis" label="Temps (heures)" />
                            </yAxis>
                            <BorderPane.margin>
                                <Insets bottom="20.0" left="20.0" right="20.0" />
                            </BorderPane.margin>
                        </BarChart>

                        <!-- Scatter Chart for Points -->
                        <ScatterChart fx:id="scatterChart" prefHeight="500.0" prefWidth="1000.0" style="-fx-background-color: #e0e0e0; -fx-border-radius: 10px;" visible="false">
                            <xAxis>
                                <CategoryAxis fx:id="scatterDayAxis" label="Jours de la semaine" />
                            </xAxis>
                            <yAxis>
                                <NumberAxis fx:id="scatterTimeAxis" label="Temps (heures)" />
                            </yAxis>
                        </ScatterChart>

                        <!-- Line Chart for Connecting Points -->
                        <LineChart fx:id="lineChart" prefHeight="500.0" prefWidth="1000.0" style="-fx-background-color: #e0e0e0; -fx-border-radius: 10px;" visible="false">
                            <xAxis>
                                <CategoryAxis fx:id="lineDayAxis" label="Jours de la semaine" />
                            </xAxis>
                            <yAxis>
                                <NumberAxis fx:id="lineTimeAxis" label="Temps (heures)" />
                            </yAxis>
                        </LineChart>

                        <!-- Progress Indicator (Loading) -->
                        <ProgressIndicator fx:id="loadingIndicator" style="-fx-pref-width: 50px; -fx-pref-height: 50px;" visible="false" />
                    </GridPane>
                </center>
            </BorderPane>
        </StackPane>
    </children>
</AnchorPane>
